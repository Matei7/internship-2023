(()=>{"use strict";var t,e,n,o,a={107:(t,e,n)=>{n.d(e,{BJ:()=>T,BY:()=>I,Dm:()=>A,OP:()=>L,Qw:()=>q,SV:()=>h,TS:()=>E,VI:()=>y,Xp:()=>m,as:()=>w});let o=[],a=null,r=0,c=0,s=0,i=6;const d="64c3aa50d27ba",l=`http://vlad-matei.thrive-dev.bitstoneint.com/wp-json/internship-api/v1/cart/${d}`,u=document.querySelector(".cart-items");function p(t){const e=document.querySelector(".products");for(const n of t){const t=document.createElement("div");t.classList.add("products-item");const o=document.createElement("h2");o.innerText=n.title,o.classList.add("product-title");const a=document.createElement("div");a.classList.add("product-images");for(const t of n.images){const e=document.createElement("img");e.setAttribute("src",t),e.setAttribute("alt",n.title+"image"),e.classList.add("product-image"),e.style.display="none",a.appendChild(e)}a.firstElementChild.style.display="block";const r=document.createElement("div"),c=document.createElement("div");r.classList.add("arrow-left"),c.classList.add("arrow-right");const s=document.createElement("h3");s.innerText=`Made by ${n.brand}`,s.classList.add("product-brand");const i=document.createElement("h5");i.innerText=`Category: ${n.category}`,i.classList.add("product-category");const d=document.createElement("p");d.innerText=n.description,d.classList.add("product-description");const l=document.createElement("p"),u=Math.floor(n.price+n.price*n.discountPercentage/100);l.innerText=`$${u}`,l.classList.add("product-discount-percentage"),t.setAttribute("data-id",n.id);const p=document.createElement("h3");p.innerText=`$${n.price}`,p.classList.add("product-price");const m=document.createElement("h3"),y=document.createElement("span");y.classList.add("star-rating"),y.style.setProperty("--rating",n.rating),m.classList.add("product-rating"),m.appendChild(y),m.innerHTML+=` ${n.rating}`;const f=document.createElement("h3");f.innerText=`Available: ${n.stock}`,f.classList.add("product-stock");const h=document.createElement("button");h.classList.add("product-button"),h.innerText="Add to cart",t.appendChild(a),t.appendChild(r),t.appendChild(c),t.appendChild(o),t.appendChild(s),t.appendChild(i),t.appendChild(m),t.appendChild(f),t.appendChild(d),t.appendChild(l),t.appendChild(p),t.appendChild(h),t.style.display="none",e.appendChild(t)}}async function m(){const t=`https://dummyjson.com/products?limit=${i}&skip=${s}&select=id,title,brand,category,description,price,stock,rating,discountPercentage,images`;if(null===localStorage.getItem("products")){const e=await fetch(t),n=await e.json();p(n.products),o=o.concat(n.products),s+=i,console.log("Products fetched successfully from API!")}else{const t=JSON.parse(localStorage.getItem("products")).slice(s,s+i);p(t),o=o.concat(t),s+=i,console.log("Products fetched successfully from localStorage!")}}async function y(){if(null===localStorage.getItem("products")){const t="https://dummyjson.com/products?limit=100&skip=0&select=id,title,brand,category,description,price,stock,rating,discountPercentage,images",e=await fetch(t),n=await e.json();localStorage.setItem("products",JSON.stringify(n.products))}}function f(){const t=document.querySelector(".shopping-cart-count");0!==r?(t.innerText=r,t.style.display="flex"):t.style.display="none"}function h(){const t=document.querySelectorAll('.product-button:not([data-event="true"])'),e=document.querySelector(".pop-up");t.forEach((t=>{t.setAttribute("data-event","true"),t.addEventListener("click",(()=>{e.style.display="flex",t.style.pointerEvents="none";const n=t.parentElement.getAttribute("data-id");if(function(t){if(null===a)return!1;for(const e of a.products)if(e.id===t)return!0;return!1}(n)){const t=u.querySelector(`[data-cart-id="${n}"]`).querySelector(".cart-item-counter"),e=parseInt(t.innerText.slice(1))+1;t.innerText=`x${e}`}else{const t=document.createElement("div");t.setAttribute("data-cart-id",n),t.classList.add("cart-item");const e=o[n-1],a=document.createElement("h3");a.innerText="x1",a.classList.add("cart-item-counter");const r=document.createElement("h3");r.innerText=e.title,r.classList.add("cart-item-title");const c=document.createElement("img");c.setAttribute("src",e.images[0]),c.setAttribute("alt",e.title+"image"),c.classList.add("cart-item-image");const s=document.createElement("h3");s.innerText=`$${e.price}`,s.classList.add("cart-item-price"),t.appendChild(c),t.appendChild(a),t.appendChild(r),t.appendChild(s),u.appendChild(t)}r++,f(),async function(t,e=1){await fetch(`https://vlad-matei.thrive-dev.bitstoneint.com/wp-json/internship-api/v1/cart/${d}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:1,products:[{id:t,quantity:e}]})}).then((t=>t.json()))}(n).then((()=>{})),k(c+o[n-1].price),localStorage.removeItem("cart"),t.innerText="Added to cart",setTimeout((()=>{e.style.display="none",t.innerText="Add to cart",t.style.pointerEvents="all"}),2e3)}))}))}function g(t){const e=t.parentElement,n=t.nextElementSibling;n?(t.style.animation="fadeOut 0.3s ease-in-out",t.style.display="none",n.style.display="block",n.style.animation="fadeIn 0.5s ease-in-out"):(t.style.animation="fadeOut 0.3s ease-in-out",t.style.display="none",e.firstElementChild.style.display="block",e.firstElementChild.style.animation="fadeIn 0.5s ease-in-out")}function v(t){const e=t.parentElement,n=t.previousElementSibling;n?(t.style.animation="fadeOut 0.3s ease-in-out",t.style.display="none",n.style.display="block",n.style.animation="fadeIn 0.5s ease-in-out"):(t.style.animation="fadeOut 0.3s ease-in-out",t.style.display="none",e.lastElementChild.style.display="block",e.lastElementChild.style.animation="fadeIn 0.5s ease-in-out")}function E(){document.querySelectorAll('.product-image:not([data-event="true"])').forEach((t=>{t.setAttribute("data-event","true"),t.addEventListener("click",(e=>{!function(t,e){const n=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth*100;n>=50?g(t):n<50&&v(t)}(t,e)}))}))}const b=t=>{const e=document.querySelector(".hovered").querySelector('.product-image[style*="display: block"]');"ArrowRight"===t.key&&g(e),"ArrowLeft"===t.key&&v(e)},S=t=>{const e=document.querySelector(".hovered").querySelector('.product-image[style*="display: block"]');t.target.classList.contains("arrow-right")&&g(e),t.target.classList.contains("arrow-left")&&v(e)};function L(){document.querySelectorAll('.products-item:not([data-event="true"])').forEach((t=>{t.setAttribute("data-event","true"),t.addEventListener("mouseover",(()=>{t.style.transform="scale(1.01)",t.classList.add("hovered"),document.addEventListener("keydown",b),t.addEventListener("click",S)})),t.addEventListener("mouseout",(()=>{t.style.transform="scale(1)",t.classList.remove("hovered"),document.removeEventListener("keydown",b),t.removeEventListener("click",S)}))}))}function w(){const t=document.querySelector(".shopping-cart");t.addEventListener("mouseover",(()=>{u.style.display="flex"})),t.addEventListener("mouseout",(()=>{u.style.display="none"}))}const C=()=>{document.querySelector(".loader").style.opacity="0"},x=()=>{document.querySelector(".loader").style.opacity="1"};function q(){window.addEventListener("scroll",(()=>{if(s+i>100)return;const{scrollTop:t,scrollHeight:e,clientHeight:n}=document.documentElement;t+n>=e-5&&(x(),m().then((()=>{C(),h(),E(),L(),A(document.querySelector(".filter-bar").value)})))}),{passive:!0})}async function T(){if(null===localStorage.getItem("cart")){const t=await fetch(l);a=await t.json(),console.log("No cart in local storage, fetching from API"),localStorage.setItem("cart",JSON.stringify(a))}else console.log("Cart found in local storage"),a=JSON.parse(localStorage.getItem("cart"));for(const t of a.products)$(t);f(),k(a.total)}function k(t){c=t,document.querySelector(".cart-total").innerText=`TOTAL: $${t}`}function $(t){r+=t.quantity;const e=document.createElement("div");e.setAttribute("data-cart-id",t.id),e.classList.add("cart-item");const n=document.createElement("h3");n.classList.add("cart-item-counter"),n.innerText=`x${t.quantity}`;const o=document.createElement("h3");o.innerText=t.title,o.classList.add("cart-item-title");const a=document.createElement("img");a.setAttribute("src",t.images[0]),a.setAttribute("alt",t.title+"image"),a.classList.add("cart-item-image");const c=document.createElement("h3");c.innerText=`$${t.price}`,c.classList.add("cart-item-price"),e.appendChild(a),e.appendChild(n),e.appendChild(o),e.appendChild(c),u.appendChild(e)}function A(t){if(""===t){for(const t of o)document.querySelector(`[data-id="${t.id}"]`).style.display="grid";return}const e=o.filter((e=>e.category.toLowerCase().startsWith(t.toLowerCase())));if(0!==e.length){for(const t of o)document.querySelector(`[data-id="${t.id}"]`).style.display="none";for(const t of e)document.querySelector(`[data-id="${t.id}"]`).style.display="grid"}else{const e=o.filter((e=>e.title.toLowerCase().startsWith(t.toLowerCase())));for(const t of o)document.querySelector(`[data-id="${t.id}"]`).style.display="none";for(const t of e)document.querySelector(`[data-id="${t.id}"]`).style.display="grid"}}function I(){document.querySelector(".filter-bar").addEventListener("input",(t=>{A(t.target.value)}))}},971:(t,e,n)=>{n.a(t,(async(t,e)=>{try{var o=n(107);await(0,o.Xp)(),await(0,o.BJ)(),(0,o.SV)(),(0,o.TS)(),(0,o.OP)(),(0,o.as)(),(0,o.BY)(),(0,o.Qw)(),(0,o.Dm)(""),await(0,o.VI)(),e()}catch(t){e(t)}}),1)}},r={};function c(t){var e=r[t];if(void 0!==e)return e.exports;var n=r[t]={exports:{}};return a[t](n,n.exports,c),n.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},c.a=(a,r,c)=>{var s;c&&((s=[]).d=-1);var i,d,l,u=new Set,p=a.exports,m=new Promise(((t,e)=>{l=e,d=t}));m[e]=p,m[t]=t=>(s&&t(s),u.forEach(t),m.catch((t=>{}))),a.exports=m,r((a=>{var r;i=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[t])return a;if(a.then){var r=[];r.d=0,a.then((t=>{c[e]=t,o(r)}),(t=>{c[n]=t,o(r)}));var c={};return c[t]=t=>t(r),c}}var s={};return s[t]=t=>{},s[e]=a,s})))(a);var c=()=>i.map((t=>{if(t[n])throw t[n];return t[e]})),d=new Promise((e=>{(r=()=>e(c)).r=0;var n=t=>t!==s&&!u.has(t)&&(u.add(t),t&&!t.d&&(r.r++,t.push(r)));i.map((e=>e[t](n)))}));return r.r?d:c()}),(t=>(t?l(m[n]=t):d(p),o(s)))),s&&s.d<0&&(s.d=0)},c.d=(t,e)=>{for(var n in e)c.o(e,n)&&!c.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},c.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),c(971)})();